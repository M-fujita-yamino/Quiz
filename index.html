<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åå‰å½“ã¦ã‚¯ã‚¤ã‚ºï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ç‰ˆï¼‰</title>
    <style>
        body { font-family: sans-serif; text-align: center; background: #f0f0f0; padding: 20px; }
        .card { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); max-width: 400px; margin: auto; }
        .img-container { width: 100%; height: 300px; background: #ddd; display: flex; align-items: center; justify-content: center; margin-bottom: 15px; border-radius: 8px; overflow: hidden; }
        img { max-width: 100%; max-height: 100%; object-fit: contain; }
        .btn { width: 100%; padding: 15px; margin: 5px 0; border-radius: 30px; border: none; font-size: 1.1rem; cursor: pointer; }
        #mic-btn { background: #2ecc71; color: white; }
        #ans-btn { background: #95a5a6; color: white; }
        #next-btn { background: #3498db; color: white; }
    </style>
</head>
<body>

<div class="card">
    <div class="img-container">
        <img id="q-img" src="" alt="ã‚¯ã‚¤ã‚ºç”»åƒ">
    </div>
    <div id="msg" style="font-weight: bold; min-height: 2em; margin: 10px 0;">èª­ã¿è¾¼ã¿ä¸­...</div>
    <button id="mic-btn" class="btn">ğŸ™ é•·æŠ¼ã—ã—ã¦å›ç­”</button>
    <button id="ans-btn" class="btn">æ­£è§£ã‚’è¡¨ç¤ºã™ã‚‹</button>
    <button onclick="location.reload()" class="btn" id="next-btn" style="display:none;">æ¬¡ã®å•é¡Œã¸</button>
</div>

<script>
    // ã€ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ã€‘ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®ä»£ã‚ã‚Šã«ã“ã“ã«ç›´æ¥ãƒ‡ãƒ¼ã‚¿ã‚’ç½®ãã¾ã™
    const quizList = [
        {
            name: "çŸ³åŸè£•æ¬¡éƒ",
            keys: ["çŸ³åŸè£•æ¬¡éƒ", "ã‚¤ã‚·ãƒãƒ©ãƒ¦ã‚¦ã‚¸ãƒ­ã‚¦", "è£•æ¬¡éƒ"],
            img: "https://www.teichiku.co.jp/teichiku/artist/yujiro/profile/photo/yujiro.jpg"
        },
        {
            name: "ä½è—¤è¼æ˜",
            keys: ["ä½è—¤è¼æ˜", "ã‚µãƒˆã‚¦ãƒ†ãƒ«ã‚¢ã‚­", "ã‚µãƒˆãƒ†ãƒ«"],
            img: "https://hanshintigers.jp/data/player/2024/img/8.jpg"
        },
        {
            name: "å²¡ç”°å½°å¸ƒ",
            keys: ["å²¡ç”°å½°å¸ƒ", "ã‚ªã‚«ãƒ€ã‚¢ã‚­ãƒãƒ–", "å²¡ç”°ç›£ç£"],
            img: "https://hanshintigers.jp/data/player/2024/img/80.jpg"
        }
    ];

    let currentQuiz = null;

    // ã‚¯ã‚¤ã‚ºã®åˆæœŸåŒ–
    function initQuiz() {
        // ãƒ©ãƒ³ãƒ€ãƒ ã«ä¸€äººé¸ã¶
        currentQuiz = quizList[Math.floor(Math.random() * quizList.length)];
        
        const imgElement = document.getElementById('q-img');
        imgElement.src = currentQuiz.img;
        
        document.getElementById('msg').innerText = "ã“ã®äººã¯ã ã‚Œï¼Ÿï¼ˆãƒœã‚¿ãƒ³ã‚’é•·æŠ¼ã—ã—ã¦ç­”ãˆã¦ã­ï¼‰";
        
        // ç”»åƒãŒèª­ã¿è¾¼ã‚ãªã„æ™‚ã®å‡¦ç†
        imgElement.onerror = () => {
            document.getElementById('msg').innerText = "ç”»åƒã‚’èª­ã¿è¾¼ã‚ã¾ã›ã‚“ã§ã—ãŸ";
        };
    }

    // æ­£è§£è¡¨ç¤ºãƒœã‚¿ãƒ³ã®å‡¦ç†
    document.getElementById('ans-btn').onclick = () => {
        if(!currentQuiz) return;
        document.getElementById('msg').innerHTML = "æ­£è§£ã¯ <span style='color:orange'>" + currentQuiz.name + "</span> ã§ã™";
        document.getElementById('next-btn').style.display = "block";
    };

    // éŸ³å£°èªè­˜ã®å‡¦ç†
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = 'ja-JP';

    const btn = document.getElementById('mic-btn');
    btn.onmousedown = (e) => { e.preventDefault(); recognition.start(); };
    btn.onmouseup = () => { recognition.stop(); };
    btn.ontouchstart = (e) => { e.preventDefault(); recognition.start(); };
    btn.ontouchend = () => { recognition.stop(); };

    recognition.onresult = (event) => {
        const voiceText = event.results[0][0].transcript;
        const isCorrect = currentQuiz.keys.some(k => voiceText.includes(k)) || voiceText.includes(currentQuiz.name);
        
        if (isCorrect) {
            document.getElementById('msg').innerHTML = "<span style='color:green'>ğŸ‰ æ­£è§£ï¼" + currentQuiz.name + "</span>";
            document.getElementById('next-btn').style.display = "block";
        } else {
            document.getElementById('msg').innerHTML = "<span style='color:red'>âŒ æ®‹å¿µï¼ˆåˆ¤å®šï¼š" + voiceText + "ï¼‰</span>";
        }
    };

    // èµ·å‹•
    initQuiz();
</script>

</body>
</html>
